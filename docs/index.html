<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SafeFeat ‚Äî Leakage-safe feature engineering</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Fraunces:ital,wght@0,300;0,600;1,300&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #ffffff;
    --surface: #f8fafc;
    --surface2: #f1f5f9;
    --border: #e2e8f0;
    --border2: #cbd5e1;
    --accent: #16a34a;
    --accent-light: #dcfce7;
    --accent2: #6d28d9;
    --accent2-light: #ede9fe;
    --warn: #d97706;
    --warn-light: #fef3c7;
    --danger: #dc2626;
    --danger-light: #fee2e2;
    --text: #0f172a;
    --text2: #334155;
    --muted: #64748b;
    --code-bg: #f8fafc;
  }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.7;
    font-size: 15px;
  }

  /* NAV */
  nav {
    position: sticky; top: 0; z-index: 100;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 2.5rem;
    height: 56px;
    background: rgba(255,255,255,0.9);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
  }
  .nav-logo {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 1rem;
    color: var(--accent);
    letter-spacing: -0.02em;
    font-weight: 500;
  }
  .nav-links { display: flex; gap: 2rem; align-items: center; }
  .nav-links a {
    color: var(--muted); text-decoration: none; font-size: 0.875rem;
    transition: color 0.2s;
  }
  .nav-links a:hover { color: var(--text); }
  .nav-links .nav-gh {
    background: var(--text);
    color: #fff;
    padding: 0.35rem 0.85rem;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 500;
  }
  .nav-links .nav-gh:hover { background: var(--text2); color: #fff; }

  /* HERO */
  .hero {
    max-width: 860px;
    margin: 0 auto;
    padding: 7rem 2rem 4rem;
    text-align: center;
  }

  .badge {
    display: inline-flex; align-items: center; gap: 0.4rem;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.72rem;
    background: var(--accent-light);
    color: var(--accent);
    border: 1px solid #bbf7d0;
    border-radius: 999px;
    padding: 0.3rem 0.85rem;
    margin-bottom: 2rem;
    letter-spacing: 0.05em;
  }

  h1 {
    font-family: 'Fraunces', serif;
    font-weight: 600;
    font-size: clamp(2.4rem, 5vw, 3.6rem);
    line-height: 1.15;
    color: var(--text);
    margin-bottom: 1.2rem;
    letter-spacing: -0.02em;
  }
  h1 em {
    font-style: italic;
    font-weight: 300;
    color: var(--accent);
  }

  .hero-sub {
    font-size: 1.05rem;
    color: var(--muted);
    max-width: 560px;
    margin: 0 auto 2.5rem;
    font-weight: 300;
  }

  .hero-actions { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }

  .btn {
    display: inline-flex; align-items: center; gap: 0.4rem;
    padding: 0.65rem 1.4rem;
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    transition: all 0.2s;
    cursor: pointer;
    border: none;
  }
  .btn-primary {
    background: var(--accent);
    color: #fff;
  }
  .btn-primary:hover { background: #15803d; }
  .btn-ghost {
    background: transparent;
    color: var(--text);
    border: 1px solid var(--border2);
  }
  .btn-ghost:hover { border-color: var(--muted); background: var(--surface); }

  .install-bar {
    display: inline-flex; align-items: center; gap: 1rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 0.65rem 1.2rem;
    margin-top: 2rem;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.875rem;
    color: var(--accent);
    box-shadow: 0 1px 3px rgba(0,0,0,0.06);
  }
  .install-bar span { color: var(--muted); }

  /* SECTIONS */
  .section { max-width: 900px; margin: 0 auto; padding: 5rem 2rem; }
  .section-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.7rem;
    letter-spacing: 0.12em;
    color: var(--accent);
    text-transform: uppercase;
    margin-bottom: 0.75rem;
  }
  h2 {
    font-family: 'Fraunces', serif;
    font-weight: 600;
    font-size: clamp(1.6rem, 3vw, 2.2rem);
    color: var(--text);
    letter-spacing: -0.02em;
    margin-bottom: 1rem;
  }

  /* LEAKAGE COMPARISON */
  .compare-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 2.5rem;
  }
  @media (max-width: 640px) { .compare-grid { grid-template-columns: 1fr; } }

  .compare-card {
    border-radius: 10px;
    padding: 1.5rem;
    border: 1px solid var(--border);
  }
  .compare-card.bad {
    background: #fff5f5;
    border-color: #fecaca;
  }
  .compare-card.good {
    background: #f0fdf4;
    border-color: #bbf7d0;
  }
  .compare-tag {
    display: inline-flex; align-items: center; gap: 0.35rem;
    font-size: 0.72rem;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 1rem;
    padding: 0.25rem 0.6rem;
    border-radius: 4px;
  }
  .compare-card.bad .compare-tag { background: var(--danger-light); color: var(--danger); }
  .compare-card.good .compare-tag { background: var(--accent-light); color: var(--accent); }
  .compare-card p { font-size: 0.875rem; color: var(--muted); margin-bottom: 1rem; }

  /* CODE */
  pre {
    background: var(--code-bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1.2rem;
    overflow-x: auto;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.78rem;
    line-height: 1.7;
    color: var(--text2);
  }
  .bad pre { border-color: #fecaca; background: #fff; }
  .good pre { border-color: #bbf7d0; background: #fff; }

  .kw { color: #7c3aed; }
  .fn { color: #2563eb; }
  .str { color: #16a34a; }
  .cm { color: #94a3b8; font-style: italic; }
  .num { color: var(--warn); }
  .acc { color: var(--accent); }
  .err { color: var(--danger); }

  /* WHY CARDS */
  .why-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 2.5rem;
  }
  .why-card {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.4rem;
    transition: box-shadow 0.2s, border-color 0.2s;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }
  .why-card:hover {
    border-color: var(--border2);
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }
  .why-icon { font-size: 1.4rem; margin-bottom: 0.75rem; }
  .why-card h3 {
    font-size: 0.95rem;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 0.4rem;
  }
  .why-card p { font-size: 0.825rem; color: var(--muted); line-height: 1.6; }

  /* CONCEPTS */
  .concepts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1rem;
    margin-top: 2.5rem;
  }
  .concept-card {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.4rem 1.4rem 1.2rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }
  .concept-pill {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    color: var(--accent2);
    background: var(--accent2-light);
    border: 1px solid #ddd6fe;
    border-radius: 4px;
    padding: 0.2rem 0.5rem;
    display: inline-block;
    margin-bottom: 0.75rem;
  }
  .concept-card h3 { font-size: 0.95rem; font-weight: 500; color: var(--text); margin-bottom: 0.4rem; }
  .concept-card p { font-size: 0.825rem; color: var(--muted); line-height: 1.6; }
  .ic { font-family: 'IBM Plex Mono', monospace; font-size: 0.8rem; color: var(--accent); background: var(--accent-light); padding: 0.1rem 0.35rem; border-radius: 3px; }

  /* EXAMPLE TABS */
  .example-section { max-width: 900px; margin: 0 auto; padding: 3rem 2rem 5rem; }
  .example-tabs { display: flex; gap: 0; margin-bottom: -1px; position: relative; z-index: 1; }
  .tab {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.75rem;
    padding: 0.55rem 1rem;
    border: 1px solid var(--border);
    background: var(--surface2);
    color: var(--muted);
    cursor: pointer;
    transition: all 0.15s;
    border-bottom: none;
    border-radius: 6px 6px 0 0;
  }
  .tab.active { background: #fff; color: var(--accent); border-bottom: 1px solid #fff; font-weight: 500; }
  .tab-content { display: none; }
  .tab-content.active { display: block; }
  .tab-content pre { border-radius: 0 8px 8px 8px; border-top-left-radius: 0; }

  /* NAMING LEGEND */
  .naming-legend {
    margin-top: 2rem;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 1.4rem;
  }
  .naming-legend h3 { font-size: 0.95rem; font-weight: 500; color: var(--text); margin-bottom: 1rem; }
  .column-name {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.85rem;
    display: flex; flex-wrap: wrap; align-items: center; gap: 0;
    margin-bottom: 0.75rem;
  }
  .cn-part {
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.78rem;
  }
  .cn-sep { color: var(--muted); padding: 0 0.1rem; }
  .cn-table { background: var(--accent2-light); color: var(--accent2); }
  .cn-col   { background: var(--accent-light);  color: var(--accent); }
  .cn-agg   { background: var(--warn-light);    color: var(--warn); }
  .cn-win   { background: var(--danger-light);  color: var(--danger); }
  .legend-row { display: flex; gap: 0.75rem; flex-wrap: wrap; margin-top: 0.5rem; }
  .legend-chip { display: flex; align-items: center; gap: 0.35rem; font-size: 0.75rem; color: var(--muted); }
  .legend-chip .dot { width: 8px; height: 8px; border-radius: 2px; }

  /* FAQ */
  .faq-list { margin-top: 2rem; display: flex; flex-direction: column; gap: 0.75rem; }
  .faq-item {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04);
  }
  .faq-q {
    padding: 1rem 1.2rem;
    font-weight: 500;
    font-size: 0.9rem;
    color: var(--text);
    cursor: pointer;
    display: flex; justify-content: space-between; align-items: center;
    user-select: none;
  }
  .faq-q:hover { background: var(--surface); }
  .faq-arrow { color: var(--muted); transition: transform 0.2s; font-style: normal; }
  .faq-a {
    display: none;
    padding: 0 1.2rem 1rem;
    font-size: 0.875rem;
    color: var(--muted);
    line-height: 1.7;
    border-top: 1px solid var(--border);
    padding-top: 0.85rem;
  }
  .faq-a code {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 0.8rem;
    background: var(--surface2);
    padding: 0.1rem 0.4rem;
    border-radius: 4px;
    color: var(--accent);
  }
  .faq-item.open .faq-a { display: block; }
  .faq-item.open .faq-arrow { transform: rotate(180deg); }

  /* DIVIDER */
  .divider {
    border: none;
    border-top: 1px solid var(--border);
    max-width: 900px;
    margin: 0 auto;
  }

  /* FOOTER */
  footer {
    text-align: center;
    padding: 3rem 2rem;
    color: var(--muted);
    font-size: 0.8rem;
    font-family: 'IBM Plex Mono', monospace;
    border-top: 1px solid var(--border);
    background: var(--surface);
  }
  footer a { color: var(--accent); text-decoration: none; }

  /* ANIMATIONS */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .hero > * { animation: fadeUp 0.5s ease both; }
  .hero > *:nth-child(1) { animation-delay: 0.05s; }
  .hero > *:nth-child(2) { animation-delay: 0.15s; }
  .hero > *:nth-child(3) { animation-delay: 0.25s; }
  .hero > *:nth-child(4) { animation-delay: 0.35s; }
  .hero > *:nth-child(5) { animation-delay: 0.45s; }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <span class="nav-logo">safefeat</span>
  <div class="nav-links">
    <a href="#">Getting Started</a>
    <a href="#">Concepts</a>
    <a href="#">API Reference</a>
    <a href="https://github.com/AlishaAng/safefeat" class="nav-gh">GitHub ‚Üó</a>
  </div>
</nav>

<!-- HERO -->
<div class="hero">
  <div class="badge">‚ú¶ v0.1.1 ‚Äî now on PyPI</div>
  <h1>Feature engineering<br>without <em>the leakage</em></h1>
  <p class="hero-sub">
    SafeFeat builds ML features from event logs using only data available at prediction time ‚Äî so your model learns what it'd actually know in production.
  </p>
  <div class="hero-actions">
    <a href="#" class="btn btn-primary">Read the docs ‚Üí</a>
    <a href="https://github.com/AlishaAng/safefeat" class="btn btn-ghost">View on GitHub</a>
  </div>
  <div class="install-bar">
    <span>$</span> pip install safefeat
  </div>
</div>

<hr class="divider">

<!-- THE PROBLEM -->
<div class="section">
  <div class="section-label">The problem</div>
  <h2>Data leakage silently destroys your model</h2>
  <p style="color: var(--muted); max-width: 620px; font-size: 0.95rem;">
    When you compute features like "total purchases in the last 30 days" without anchoring to a specific point in time,
    you accidentally include future data. Your model looks great in training ‚Äî then falls apart in production.
  </p>

  <div class="compare-grid">
    <div class="compare-card bad">
      <div class="compare-tag">‚ö† Without SafeFeat</div>
      <p>Naively grouping by user leaks future events into past rows. Your validation AUC is 0.91. Production AUC is 0.73.</p>
      <pre><code><span class="cm"># ‚ùå Leaky ‚Äî uses ALL events,</span>
<span class="cm">#    including ones after cutoff</span>
features = events.<span class="fn">groupby</span>(<span class="str">"user_id"</span>)[<span class="str">"amount"</span>].<span class="fn">sum</span>()

df = spine.<span class="fn">merge</span>(features, <span class="kw">on</span>=<span class="str">"user_id"</span>)</code></pre>
    </div>
    <div class="compare-card good">
      <div class="compare-tag">‚úì With SafeFeat</div>
      <p>SafeFeat enforces point-in-time correctness automatically. No manual filtering. No accidental leakage.</p>
      <pre><code><span class="cm"># ‚úÖ Safe ‚Äî only uses events</span>
<span class="cm">#    before each cutoff_time</span>
<span class="kw">from</span> safefeat <span class="kw">import</span> build_features, WindowAgg

X = <span class="fn">build_features</span>(spine, tables, spec,
      event_time_cols={<span class="str">"events"</span>: <span class="str">"event_time"</span>})</code></pre>
    </div>
  </div>
</div>

<hr class="divider">

<!-- WHY SAFEFEAT -->
<div class="section">
  <div class="section-label">Why SafeFeat</div>
  <h2>Built for real ML pipelines</h2>
  <div class="why-grid">
    <div class="why-card">
      <div class="why-icon">üîí</div>
      <h3>Leakage-proof by design</h3>
      <p>Every feature is computed relative to each entity's cutoff time. Future data physically cannot be included.</p>
    </div>
    <div class="why-card">
      <div class="why-icon">üìã</div>
      <h3>Audit trail</h3>
      <p>See exactly which events were joined, kept, and dropped for each prediction point. Debug issues in minutes, not days.</p>
    </div>
    <div class="why-card">
      <div class="why-icon">üß©</div>
      <h3>Declarative specs</h3>
      <p>Define features once. Run them across any spine. No duplicated filtering logic scattered across your codebase.</p>
    </div>
    <div class="why-card">
      <div class="why-icon">‚ö°</div>
      <h3>Fast & pandas-native</h3>
      <p>Vectorised operations on standard DataFrames. No new infrastructure or custom data formats required.</p>
    </div>
  </div>
</div>

<hr class="divider">

<!-- CONCEPTS -->
<div class="section">
  <div class="section-label">Core concepts</div>
  <h2>Three things you need to know</h2>
  <div class="concepts-grid">
    <div class="concept-card">
      <div class="concept-pill">spine</div>
      <h3>When to predict</h3>
      <p>A DataFrame with <span class="ic">entity_id</span> and <span class="ic">cutoff_time</span>. Each row is one prediction point ‚Äî e.g. "what did we know about user u1 on Jan 10?"</p>
    </div>
    <div class="concept-card">
      <div class="concept-pill">events</div>
      <h3>Your raw data</h3>
      <p>A time-series DataFrame with entity IDs, event timestamps, and attributes. Purchases, logins, clicks ‚Äî anything with a timestamp.</p>
    </div>
    <div class="concept-card">
      <div class="concept-pill">spec</div>
      <h3>What to compute</h3>
      <p>A list of feature blocks like <span class="ic">WindowAgg</span> or <span class="ic">RecencyBlock</span>. Declarative, readable, and reusable across projects.</p>
    </div>
  </div>
</div>

<hr class="divider">

<!-- EXAMPLE -->
<div class="example-section">
  <div class="section-label">Quick start</div>
  <h2>Real-world example: churn prediction</h2>
  <p style="color:var(--muted);font-size:0.9rem;margin: 0.75rem 0 1.5rem;">Computing 7-day and 30-day purchase features for a set of users, safely anchored to their churn prediction date.</p>

  <div class="example-tabs">
    <div class="tab active" onclick="showTab('basic', this)">WindowAgg</div>
    <div class="tab" onclick="showTab('recency', this)">RecencyBlock</div>
    <div class="tab" onclick="showTab('audit', this)">Audit Report</div>
  </div>

  <div id="tab-basic" class="tab-content active">
    <pre><code><span class="kw">import</span> pandas <span class="kw">as</span> pd
<span class="kw">from</span> safefeat <span class="kw">import</span> build_features, WindowAgg

<span class="cm"># When we're making predictions (e.g. weekly churn run)</span>
spine = pd.<span class="fn">DataFrame</span>({
    <span class="str">"entity_id"</span>:    [<span class="str">"u1"</span>, <span class="str">"u2"</span>],
    <span class="str">"cutoff_time"</span>:  [<span class="str">"2024-01-10"</span>, <span class="str">"2024-01-31"</span>],
})

<span class="cm"># Historical event log</span>
events = pd.<span class="fn">DataFrame</span>({
    <span class="str">"entity_id"</span>:  [<span class="str">"u1"</span>,         <span class="str">"u1"</span>,         <span class="str">"u2"</span>,         <span class="str">"u2"</span>],
    <span class="str">"event_time"</span>: [<span class="str">"2024-01-05"</span>, <span class="str">"2024-01-06"</span>, <span class="str">"2024-01-10"</span>, <span class="str">"2024-01-30"</span>],
    <span class="str">"amount"</span>:     [<span class="num">10.0</span>,          <span class="num">20.0</span>,          <span class="num">5.0</span>,           <span class="num">25.0</span>],
    <span class="str">"event_type"</span>: [<span class="str">"click"</span>,      <span class="str">"purchase"</span>,   <span class="str">"purchase"</span>,   <span class="str">"click"</span>],
})

spec = [
    <span class="fn">WindowAgg</span>(
        table=<span class="str">"events"</span>,
        windows=[<span class="str">"7D"</span>, <span class="str">"30D"</span>],
        metrics={
            <span class="str">"*"</span>:          [<span class="str">"count"</span>],        <span class="cm"># total events in window</span>
            <span class="str">"amount"</span>:     [<span class="str">"sum"</span>, <span class="str">"mean"</span>],  <span class="cm"># numeric aggregations</span>
            <span class="str">"event_type"</span>: [<span class="str">"nunique"</span>],      <span class="cm"># distinct event types</span>
        },
    )
]

X = <span class="fn">build_features</span>(
    spine=spine,
    tables={<span class="str">"events"</span>: events},
    spec=spec,
    event_time_cols={<span class="str">"events"</span>: <span class="str">"event_time"</span>},
    allowed_lag=<span class="str">"0s"</span>,  <span class="cm"># strict: no events at exact cutoff time</span>
)</code></pre>
  </div>

  <div id="tab-recency" class="tab-content">
    <pre><code><span class="kw">from</span> safefeat <span class="kw">import</span> RecencyBlock

<span class="cm"># Days since most recent event before cutoff</span>
<span class="cm"># Useful for: churn signals, fraud detection, behavioural modelling</span>
spec = [
    <span class="fn">RecencyBlock</span>(table=<span class="str">"events"</span>)
]

X = <span class="fn">build_features</span>(
    spine=spine,
    tables={<span class="str">"events"</span>: events},
    spec=spec,
    event_time_cols={<span class="str">"events"</span>: <span class="str">"event_time"</span>},
)

<span class="cm"># Adds column: events__recency</span>
<span class="cm"># Value: days since last event before cutoff_time</span>
<span class="cm"># NaN if no events exist before cutoff</span>
<span class="fn">print</span>(X[[<span class="str">"entity_id"</span>, <span class="str">"cutoff_time"</span>, <span class="str">"events__recency"</span>]])</code></pre>
  </div>

  <div id="tab-audit" class="tab-content">
    <pre><code><span class="cm"># The audit report tells you exactly what happened</span>
<span class="cm"># for each (entity_id, cutoff_time) pair</span>

X, audit = <span class="fn">build_features</span>(
    spine=spine,
    tables={<span class="str">"events"</span>: events},
    spec=spec,
    event_time_cols={<span class="str">"events"</span>: <span class="str">"event_time"</span>},
    return_audit=<span class="kw">True</span>,  <span class="cm"># ‚Üê enable audit</span>
)

<span class="fn">print</span>(audit)
<span class="cm"># entity_id | cutoff_time | table  | events_joined | events_kept | events_dropped</span>
<span class="cm"># u1        | 2024-01-10  | events | 4             | 2           | 2   ‚Üê future events dropped ‚úì</span>
<span class="cm"># u2        | 2024-01-31  | events | 4             | 2           | 2</span></code></pre>
  </div>

  <!-- NAMING LEGEND -->
  <div class="naming-legend">
    <h3>üè∑ Column naming convention</h3>
    <div class="column-name">
      <span class="cn-part cn-table">events</span>
      <span class="cn-sep">__</span>
      <span class="cn-part cn-col">amount</span>
      <span class="cn-sep">__</span>
      <span class="cn-part cn-agg">sum</span>
      <span class="cn-sep">__</span>
      <span class="cn-part cn-win">7d</span>
    </div>
    <div class="legend-row">
      <div class="legend-chip"><div class="dot" style="background:#7c3aed"></div> source table</div>
      <div class="legend-chip"><div class="dot" style="background:#16a34a"></div> column name (* = row count)</div>
      <div class="legend-chip"><div class="dot" style="background:#d97706"></div> aggregation (sum, mean, count, nunique)</div>
      <div class="legend-chip"><div class="dot" style="background:#dc2626"></div> time window</div>
    </div>
  </div>
</div>

<hr class="divider">

<!-- FAQ -->
<div class="section">
  <div class="section-label">Common questions</div>
  <h2>Things users run into</h2>
  <div class="faq-list">
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">
        What does <code style="font-family:monospace;font-size:0.85rem">allowed_lag="0s"</code> actually do?
        <em class="faq-arrow">‚ñæ</em>
      </div>
      <div class="faq-a">
        It controls whether events that happen at the <em>exact</em> cutoff time are included. With <code>"0s"</code>, events at the exact cutoff timestamp are excluded (strict). If your use case allows same-time events, set <code>allowed_lag="1s"</code> to include them. Default is strict.
      </div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">
        My features are all NaN ‚Äî what's wrong?
        <em class="faq-arrow">‚ñæ</em>
      </div>
      <div class="faq-a">
        The most common cause is a datetime format mismatch. Make sure both <code>cutoff_time</code> and <code>event_time</code> are parsed as datetime, not strings ‚Äî run <code>pd.to_datetime()</code> on both before calling <code>build_features</code>. Also check that timezone info is consistent; mixing tz-aware and tz-naive timestamps causes silent join failures.
      </div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">
        How is this different from Featuretools?
        <em class="faq-arrow">‚ñæ</em>
      </div>
      <div class="faq-a">
        Featuretools is powerful but heavy ‚Äî it requires restructuring your data around its entity set abstraction. SafeFeat is intentionally minimal: bring plain pandas DataFrames, define a spec, get a DataFrame back. It's designed to slot into an existing pipeline with almost no ceremony.
      </div>
    </div>
    <div class="faq-item">
      <div class="faq-q" onclick="toggleFaq(this)">
        Can I use multiple event tables at once?
        <em class="faq-arrow">‚ñæ</em>
      </div>
      <div class="faq-a">
        Yes ‚Äî pass multiple tables to the <code>tables</code> dict and reference each by name in your spec. Each spec block targets one table, but you can have as many blocks as you like. All results are merged onto the spine automatically.
      </div>
    </div>
  </div>
</div>

<hr class="divider">

<footer>
  <p>safefeat ¬∑ <a href="https://pypi.org/project/safefeat/">PyPI</a> ¬∑ <a href="https://github.com/AlishaAng/safefeat">GitHub</a> ¬∑ <a href="https://alishaang.github.io/safefeat/">Docs</a> ¬∑ MIT License</p>
</footer>

<script>
  function showTab(name, el) {
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.getElementById('tab-' + name).classList.add('active');
    el.classList.add('active');
  }

  function toggleFaq(el) {
    el.parentElement.classList.toggle('open');
  }
</script>
</body>
</html>